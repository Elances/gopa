cluster:
  name: gopa
#node.name: node1

path.data: data
path.logs: log
path.certs: cert

allow_multi_instance: true
max_num_of_instances: 5

tls_enabled: false

logging.level: debug

network:
  host: 127.0.0.1

cluster.seeds:
  - 127.0.0.1:13001


modules:
- module: crawler
  enabled: false
  max_go_routine: 1
  fetch_threshold_ms: 0
  default_pipeline_config:
    name: my_crawler
    start:
      joint: init_task
      enabled: true
    process:
      - joint: url_normalization
        enabled: true
        parameters:
          follow_all_domain: false
          follow_sub_domain: true
      - joint: load_metadata
        enabled: true
      - joint: ignore_timeout
        parameters:
          ignore_timeout_after_count: 5
        enabled: true
      - joint: fetch
        enabled: true
        parameters:
          timeout_in_seconds: 10
#          proxy: "socks5://127.0.0.1:1080"
#          cookie: ""
      - joint: parse
        enabled: true
        parameters:
          dispatch_links: true
          max_depth: 1
          max_breadth: 1
      - joint: html2text
        parameters:
          merge_whitespace: false
        enabled: true
      - joint: hash
        enabled: true
        parameters:
          simhash_enabled: false
      - joint : save_snapshot_fs
        enabled: false
      - joint : save_snapshot_db
        enabled: true
        parameters:
          compress_enabled: true
          bucket: "Snapshot"
      - joint: index
        enabled: false
    end:
      joint: save_task
      enabled: true


- module: cluster
  enabled: true

- module: api
  enabled: true

- module: web
  enabled: true

- module: storage
  enabled: true

- module: filter
  enabled: true

- module: queue
  enabled: true

- module: checker
  enabled: true
  default_pipeline_config:
    name: my_checker
    start:
      joint: init_task
      enabled: true
    process:
      - joint: url_normalization
        enabled: true
        parameters:
          follow_all_domain: false
          follow_sub_domain: true
      - joint: url_ext_filter
        enabled: true
      - joint: filter_check
        enabled: true
        parameters:
          filter_key: check_filter
    end:
      joint: save_task
      enabled: true
      parameters:
        is_create: true



- module: index
  enabled: true
  elasticsearch:
    endpoint: http://127.0.0.1:9200
    index: gopa

- module: dispatch
  enabled: true

- module: database
  enabled: true
  dialect: sqlite
#  dialect: mysql
#  mysql:
#    connection: root:password@tcp(127.0.0.1:3306)/gopa?charset=utf8&parseTime=true&loc=Local

- module: statsd
  enabled: false
  host: 127.0.0.1
  port: 8125
  namespace: gopa.
  interval_in_seconds: 1
